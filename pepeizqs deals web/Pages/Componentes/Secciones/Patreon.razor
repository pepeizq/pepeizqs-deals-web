@using Microsoft.AspNetCore.Components.Web
@using Microsoft.AspNetCore.Identity
@using pepeizqs_deals_web.Areas.Identity.Data

@inject UserManager<Usuario> UserManager

<div style="max-width: 1000px; margin: auto;">
	<h1 style="font-size: 23px;">
		@Herramientas.Idiomas.CogerCadena(idioma, "Title", "Patreon")
	</h1>

	<hr>

	<div style="background-color: var(--fondoOscuro); border: 1px solid var(--fondoBotonPequeño); padding: 30px; display: flex; flex-direction: column; gap: 20px;">
		<div>
			@Herramientas.Idiomas.CogerCadena(idioma, "String1", "Patreon")
		</div>

		<div>
			@{
				WebApplicationBuilder builder = WebApplication.CreateBuilder();
				string? patreonEnlace = builder.Configuration.GetValue<string>("RedesSociales:Patreon");
			}

			<a href="@patreonEnlace">@patreonEnlace</a>
		</div>
	</div>

	<h1 style="font-size: 23px; margin-top: 50px;">
		@Herramientas.Idiomas.CogerCadena(idioma, "String2", "Patreon")
	</h1>

	<hr>

	<div style="background-color: var(--fondoOscuro); border: 1px solid var(--fondoBotonPequeño); padding: 30px;">
		<div style="font-size: 18px;">
			@Herramientas.Idiomas.CogerCadena(idioma, "String3", "Patreon")
		</div>

		<div style="margin-top: 5px;">
			@Herramientas.Idiomas.CogerCadena(idioma, "String4", "Patreon")
		</div>
	</div>
</div>

@code {

	#nullable disable

	[Parameter]
	public string idioma { get; set; }

	[Parameter]
	public string usuarioId { get; set; }

	private Usuario usuario = new Usuario();
	private bool usuarioPatreon = false;

	protected override async Task OnInitializedAsync()
	{
		usuario = await UserManager.FindByIdAsync(usuarioId);

		if (usuario != null)
		{
			usuarioPatreon = Herramientas.Patreon.VerificarComprobacion(usuario.PatreonLastCheck);
		}
	}
}
