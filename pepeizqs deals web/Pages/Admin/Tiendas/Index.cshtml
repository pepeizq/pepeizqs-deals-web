@page
@model pepeizqs_deals_web.Pages.Admin.Tiendas.IndexModel

@using Herramientas
@using Microsoft.AspNetCore.Identity
@using pepeizqs_deals_web.Areas.Identity.Data
@using Tiendas2

@inject SignInManager<Usuario> SignInManager
@inject UserManager<Usuario> UserManager

@{
	ViewData["Title"] = "Tiendas";
	Layout = "/Pages/Shared/_Layout.cshtml";
}

@if (SignInManager.IsSignedIn(User))
{
	@if (await UsuarioCoger.RolDios(UserManager, User) == true)
	{
		<div class="perfil perfil-espacio-bottom">
			<form method="post">
				@foreach (Tienda tienda in TiendasCargar.GenerarListado())
				{
					@if (tienda.AdminEnseñar == true)
					{
						<div class="perfil-flexible-centrado">
							<div style="width: 50%;">
								@if (tienda.AdminInteractuar == true)
								{
									<button class="boton-pequeño admin-boton-imagen-300x80" style="background-image: url(@tienda.Imagen300x80);" id="@tienda.Id" asp-route-id="@tienda.Id" type="submit"></button>
								}
								else
								{
									<p class="boton-pequeño admin-boton-imagen-300x80" style="background-image: url(@tienda.Imagen300x80); background-color: transparent;" id="@tienda.Id" asp-route-id="@tienda.Id"></p>
								}					
							</div>
							<div style="width: 45%;">
								<div class="admin-tiempohace">@BaseDatos.Tiendas.Admin.ComprobacionMensaje(tienda.Id)</div>
							</div>
						</div>
					}
				}
			</form>
		</div>

		<div class="perfil perfil-espacio-bottom">
			@ViewData["Mensaje"]
		</div>

		<div class="perfil perfil-espacio-bottom">
			<form method="post">
				<div class="perfil-flexible-centrado">
					<div style="width: 20%;">
						<button class="boton-pequeño" style="text-align: center;" id="divisas" asp-route-id="divisas" type="submit">Actualizar</button>
					</div>
					<div style="width: 75%;">
						<div class="admin-tiempohace">@Divisas.Mensaje()</div>
					</div>
				</div>
			</form>
		</div>
		
@*		<div class="perfil">
			<form method="post">
				<button class="boton-pequeño admin-boton-imagen-300x80" id="test" asp-route-id="test" type="submit">Test</button>
			</form>
		</div>*@
	}
}

@section Scripts {
	<partial name="_ValidationScriptsPartial" />
}
